!function(){function t(t){let s=t.is;customElements.get(s)?console.warn("Already registered "+s):customElements.define(s,t)}const s=(t,s)=>{let e;return function(){clearTimeout(e),e=setTimeout(()=>t.apply(this,arguments),s)}},e="disabled";function i(t){return class extends t{constructor(){super(...arguments),this._evCount={}}static get observedAttributes(){return[e]}get disabled(){return this._disabled}set disabled(t){this.attr(e,t,"")}attr(t,s,e){this[(s?"set":"remove")+"Attribute"](t,e||s)}to$(t){const s=t%2;return(t-s)/2+"-"+s}incAttr(t){const s=this._evCount;t in s?s[t]++:s[t]=0,this.attr("data-"+t,this.to$(s[t]))}attributeChangedCallback(t,s,i){switch(t){case e:this._disabled=null!==i}}de(t,s,e){const i=t+(e?"":"-changed"),n=new CustomEvent(i,{detail:s,bubbles:!0,composed:!1});return this.dispatchEvent(n),this.incAttr(i),n}_upgradeProperties(t){t.forEach(t=>{if(this.hasOwnProperty(t)){let s=this[t];delete this[t],this[t]=s}})}}}class n{constructor(t,s,e,i,n=50){this.seed=t,this.match=s,this.notify=e,this.max=i,this.mutDebounce=n}init(){this._debouncer=s(()=>{this.sync()},this.mutDebounce),this.sync(),this.addMutObs(this.seed.parentElement)}addMutObs(t){null!==t&&(this._mutObs=new MutationObserver(t=>{this._debouncer(!0)}),this._mutObs.observe(t,{childList:!0}))}sibCheck(t,s){}sync(t=0){const s="function"==typeof this.match;this.matches=[];let e=this.seed.nextElementSibling;for(;null!==e;){if((s?this.match(e):e.matches(this.match))&&(this.matches.push(e),++t>=this.max))return void this.notify(this);this.sibCheck(e,t),e=e.nextElementSibling}this.notify(this)}disconnect(){this._mutObs.disconnect()}}const a="on",h="noblock",r="if",o="to",c="prop",l="val";class u extends(i(HTMLElement)){constructor(){super(),this._lastEvent=null}get on(){return this._on}set on(t){this.attr(a,t)}get to(){return this._to}set to(t){this.attr(o,t)}get noblock(){return this._noblock}set noblock(t){this.attr(h,t,"")}get if(){return this._if}set if(t){this.attr(r,t)}get prop(){return this._prop}set prop(t){this.attr(c,t)}get val(){return this._val}set val(t){this.attr(c,t)}static get observedAttributes(){return super.observedAttributes.concat([a,o,h,r,c,l])}attributeChangedCallback(t,s,e){const i="_"+t;switch(t){case r:case a:case c:case l:case o:this[i]=e;break;case h:this[i]=null!==e}super.attributeChangedCallback(t,s,e)}getPreviousSib(){let t=this;for(;t&&t.tagName.startsWith("P-");)t=t.previousElementSibling;return t}connectedCallback(){this.style.display="none",this._upgradeProperties([a,o,h,r,c,l]),this.init()}init(){this.attchEvListnrs(),this.doFake()}attchEvListnrs(){const t=this.getPreviousSib();if(!t)return;if(this._bndHndlEv)return;this._bndHndlEv=this._hndEv.bind(this),t.addEventListener(this._on,this._bndHndlEv);const s=t.getAttribute("disabled");null!==s&&(0===s.length||"1"===s?t.removeAttribute("disabled"):t.setAttribute("disabled",(parseInt(s)-1).toString()))}doFake(){if(!this._if&&!this.hasAttribute("skip-init")){let t=this._lastEvent;t||(t={target:this.getPreviousSib(),isFake:!0}),this._hndEv&&this._hndEv(t)}}_hndEv(t){this.hasAttribute("debug"),t&&(t.stopPropagation&&!this._noblock&&t.stopPropagation(),this._if&&!t.target.matches(this._if)||(this._lastEvent=t,this.pass(t)))}setVal(t,s){const e=this.getPropFromPath.bind(this),i=this.val?e(t,this.val):e(t,"detail.value")||e(t,"target.value");this.commit(s,i)}commit(t,s){void 0!==s&&(t[this.prop]=s)}getPropFromPath(t,s){return s&&"."!==s?this.getProp(t,s.split(".")):t}getProp(t,s){let e=t,i=!0;const n="composedPath";return s.forEach(t=>{if(e)if(i&&e[n]){i=!1;const s=t.split("composedPath_");e=1===s.length?e[s[0]]:e[n]()[parseInt(s[1])]}else e=e[t]}),e}detach(t){t.removeEventListener(this._on,this._bndHndlEv)}disconnectedCallback(){const t=this.getPreviousSib();t&&this._bndHndlEv&&this.detach(t)}}const d="m";t(class extends u{constructor(){super(...arguments),this._pdNavDown=[],this._m=1/0}static get is(){return"p-d"}get m(){return this._m}set m(t){this.attr(d,t.toString())}static get observedAttributes(){return super.observedAttributes.concat([d])}pass(t){this._lastEvent=t,this.attr("pds","🌩️");let s=0;this._pdNavDown.forEach(t=>{s+=this.applyProps(t)}),this.attr("pds","👂"),this.attr("mtch",s.toString())}getMatches(t){return t.matches}applyProps(t){const s=this.getMatches(t);return s.forEach(t=>{this.setVal(this._lastEvent,t)}),s.length}attributeChangedCallback(t,s,e){switch(t){case d:null!==e&&(this._m=parseInt(e))}super.attributeChangedCallback(t,s,e)}newNavDown(){const t=this.applyProps.bind(this);return new n(this,this.to,t,this.m)}connectedCallback(){this._upgradeProperties([d]),this.attr("pds","📞");const t=this.newNavDown();t.ignore="p-d,p-d-x,script",t.init(),this._pdNavDown.push(t),super.connectedCallback()}});const b="if",p="lhs",_="rhs",g="tag",v="equals",m="not_equals",f="m";class E extends(i(HTMLElement)){constructor(){super(...arguments),this._conn=!1,this._navDown=null}static get is(){return"if-diff"}static get observedAttributes(){return[b,p,_,g,v,m,e,f]}get if(){return this._if}set if(t){this.attr(b,!!t,"")}get lhs(){return this._lhs}set lhs(t){this.attr(p,t.toString())}get rhs(){return this._rhs}set rhs(t){this.attr(_,t.toString())}get equals(){return this._equals}set equals(t){this.attr(v,t,"")}get not_equals(){return this._not_equals}set not_equals(t){this.attr(m,t,"")}get tag(){return this._tag}set tag(t){this.attr(g,t)}get m(){return this._m}set m(t){this.attr(f,t.toString())}attributeChangedCallback(t,s,e){super.attributeChangedCallback(t,s,e);const i="_"+t;switch(t){case v:case m:case b:this[i]=null!==e;break;case g:case p:case _:case f:this[i]=e}this.onPropsChange()}init(){this.passDown()}connectedCallback(){this.style.display="none",this._upgradeProperties(E.observedAttributes),this._conn=!0,this._debouncer=s((t=!1)=>{this.passDown()},16),setTimeout(()=>{this.init()},50)}onPropsChange(){this._conn&&!this._disabled&&this._debouncer()}loadTemplate(t){const s=t.querySelector("template");s?(t.appendChild(s.content.cloneNode(!0)),s.remove()):setTimeout(()=>{this.loadTemplate(t)},50)}tagMatches(t){const s=t.matches,e=this.value,i=this._tag;s.forEach(t=>{"0"===t.dataset[i]?e&&(this.loadTemplate(t),t.dataset[i]="1"):t.dataset[i]=e?"1":"-1"})}passDown(){let t=this._if;if(t&&(this._equals||this._not_equals)&&(t=this._equals?this._lhs===this._rhs:this._lhs!==this._rhs),this.value=t,this.de("value",{value:t}),this._tag)if(null===this._navDown){this._tag;const t=t=>t.dataset&&!!t.dataset[this._tag],s=this._m?this._m:1/0,e=this.tagMatches.bind(this);this._navDown=new n(this,t,t=>e(t),s),this._navDown.init()}else this.tagMatches(this._navDown)}disconnect(){this._navDown&&this._navDown.disconnect()}}t(E)}();